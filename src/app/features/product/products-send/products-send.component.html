<app-header></app-header>
<div class="main-layout">
  <app-sidebar></app-sidebar>
  <div class="main-content">
    <div class="products-list-header">
      <div>
        <div class="products-list-title">Products List</div>
        <div class="products-list-sub">Manage your Products</div>
      </div>
      <button
        class="add-product-btn"
        type="button"
        (click)="onAddProduct()"
        data-bs-toggle="offcanvas"
        data-bs-target="#addProductOffcanvas"
        aria-controls="addProductOffcanvas"
      >
        <span class="add-product-icon-circle">
          <mat-icon class="add-product-plus">add</mat-icon>
        </span>
        Add Product
      </button>
    </div>

    <!-- Bootstrap Offcanvas for Form -->
    <div class="offcanvas offcanvas-end add-product-offcanvas"
         tabindex="-1"
         id="addProductOffcanvas"
         aria-labelledby="addProductOffcanvasLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="addProductOffcanvasLabel">{{ formHeading }}</h5>
        <button type="button" class="btn-close text-reset"
                data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <app-form
          [orgId]="orgId"
          [mode]="formMode"
          [productData]="selectedProduct"
          (updateNeeded)="fetchItems()"
        ></app-form>
      </div>
    </div>

    <app-common-table-card
      [tabs]="tabs"
      [activeTab]="activeTab"
      [searchFields]="searchFields"
      [columns]="columns"
      [data]="filteredData"
      [total]="total"
      [totalRecords]="total"
      [page]="page"
      [callbtn]="false"
      [pageSize]="pageSize"
      [pageSizeOptions]="[10, 20, 50]"
      [loading]="loading"
      (tabChange)="onTabChange($event)"
      (search)="onSearch($event)"
      (clear)="onClear()"
      (edit)="onEdit($event)"
      (view)="onView($event)"
      (delete)="onDelete($event)"
      (toggle)="onToggle($event)"
      (pageChange)="onPageChange($event)"
      (sort)="onSort($event)"
      [enableSorting]="true"
    ></app-common-table-card>
  </div>
</div>